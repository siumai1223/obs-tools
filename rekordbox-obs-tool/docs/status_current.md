# 現状の記録

## 2024-05-31 開発状況

### 実装済み機能
1. rekordboxデータベースへの接続
   - pyrekordboxライブラリを使用
   - データベースキーの自動取得に対応
   - 基本的な曲情報（タイトル、アーティスト、キー）の取得が可能

2. 曲情報の取得
   - タイトル、アーティスト名の取得
   - キー情報の取得と整形（例：Abm, Dm）
   - アルバム、ジャンル情報の取得

### 既知の問題
1. BPM情報
   - 現在BPMが常に0として取得される問題
   - pyrekordboxライブラリでのBPM取得方法の調査が必要

2. アートワーク情報
   - アートワーク情報が取得できない問題
   - データベース上のアートワーク情報が失われている可能性
   - 外部ソース（iTunes等）からの再取得機能の実装を検討中

3. 現在再生中の曲情報
   - リアルタイムでの再生中の曲情報取得が未実装
   - 現在はデータベース内の最初の曲を表示

### 次のステップ
1. BPM取得の修正
   - pyrekordboxライブラリのBPM取得機能の調査
   - 必要に応じてライブラリの修正やPR提出

2. アートワーク情報の復元（新規ブランチで対応予定）
   - iTunesなどの外部ソースからアートワーク取得
   - rekordboxデータベースへのアートワーク適用
   - 詳細な実装方法は検討中

3. OBS連携機能の実装
   - 現在再生中の曲情報をOBSに表示
   - テキストソースの自動更新機能

### 注意点
1. データベース操作
   - バックアップ/リストア機能は予期せぬデータ損失の可能性があるため廃止
   - データベースの直接操作は慎重に行う必要あり

2. 開発方針
   - 機能追加時は適切にブランチを分ける
   - テスト駆動開発の導入を検討

## Git ワークフロー

### Pushのタイミング
1. 作業の進捗保存
   - 論理的な作業単位の完了時
   - 1日の作業終了時
   - ローカルの変更をバックアップする目的

2. 頻度
   - 比較的頻繁（1日に複数回も可）
   - 小さな変更でもOK
   - 作業ブランチが安定した状態であれば随時

3. プッシュ前のチェックリスト
   - コードが正常に動作することを確認
   - 不要なファイルが含まれていないことを確認
   - コミットメッセージが適切であることを確認

### Pull Requestのタイミング
1. 機能の完成時
   - 機能実装が完全に完了
   - テストが全て通過
   - ドキュメントの更新も完了

2. 頻度
   - 比較的少ない（機能単位）
   - まとまった変更がある時
   - プロジェクトの重要なマイルストーン時

3. 目的
   - コードレビューの依頼
   - メインブランチへの統合提案
   - 品質管理のためのチェックポイント

### 現在のブランチ状況
1. feature/rekordbox-integration
   - 基本的な機能実装中
   - Pull Request作成の前に必要な作業：
     - BPM取得問題の解決
     - 現在再生中の曲情報の取得機能実装
     - テストの追加と実行
     - ドキュメントの最終更新

2. 今後予定されるブランチ
   - feature/artwork-integration
     - アートワーク取得機能の実装
     - 外部ソースとの連携
     - 詳細は別途計画書参照 